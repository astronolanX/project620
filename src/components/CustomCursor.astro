---
---

<div class="cursor-container">
  <div class="cursor-dot"></div>
</div>

<style>
  .cursor-container {
    pointer-events: none;
    position: fixed;
    top: 0;
    left: 0;
    z-index: 9999;
  }

  .cursor-dot {
    position: fixed;
    top: -10px;
    left: -10px;
    width: 20px;
    height: 20px;
    background: rgba(0, 0, 0, 0.4);
    border-radius: 50%;
    pointer-events: none;
    z-index: 10000;
    transition: transform 0.05s ease, opacity 0.1s ease, background 0.15s ease;
    mix-blend-mode: difference;
  }

  .cursor-dot.hover {
    transform: scale(1.5);
    background: rgba(0, 0, 0, 0.6);
  }

  .cursor-dot.click {
    animation: bounce 0.4s ease;
  }

  @keyframes bounce {
    0% {
      transform: scale(1);
    }
    25% {
      transform: scale(0.6);
    }
    50% {
      transform: scale(1.3);
    }
    75% {
      transform: scale(0.9);
    }
    100% {
      transform: scale(1);
    }
  }

  /* Hide custom cursor on mobile */
  @media (hover: none) and (pointer: coarse) {
    .cursor-container {
      display: none;
    }
  }

  /* Style adjustments for dark sections */
  .dark-mode .cursor-dot {
    background: rgba(255, 255, 255, 0.4);
  }

  .dark-mode .cursor-dot.hover {
    background: rgba(255, 255, 255, 0.6);
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const cursorDot = document.querySelector('.cursor-dot');
    
    if (!cursorDot) return;
    
    // Check if device supports hover (desktop)
    const hasHover = window.matchMedia('(hover: hover)').matches;
    if (!hasHover) return;
    
    let cursorX = 0;
    let cursorY = 0;
    let dotX = 0;
    let dotY = 0;
    
    // Hide default cursor globally
    document.body.style.cursor = 'none';
    
    // Track mouse position
    document.addEventListener('mousemove', (e) => {
      cursorX = e.clientX;
      cursorY = e.clientY;
    });
    
    // Smooth animation loop
    function animate() {
      // Dot follows cursor instantly
      dotX += (cursorX - dotX) * 0.9;
      dotY += (cursorY - dotY) * 0.9;
      cursorDot.style.transform = `translate(${dotX}px, ${dotY}px)`;
      
      requestAnimationFrame(animate);
    }
    animate();
    
    // Click animation
    document.addEventListener('mousedown', () => {
      cursorDot.classList.add('click');
    });
    
    document.addEventListener('mouseup', () => {
      setTimeout(() => {
        cursorDot.classList.remove('click');
      }, 400);
    });
    
    // Hover effects for interactive elements
    const interactiveElements = document.querySelectorAll('a, button, input, textarea, select, [role="button"], .blog-item, .contact-link, .cv-button, .grid-block');
    
    interactiveElements.forEach((el) => {
      el.style.cursor = 'none';
      
      el.addEventListener('mouseenter', () => {
        cursorDot.classList.add('hover');
      });
      
      el.addEventListener('mouseleave', () => {
        cursorDot.classList.remove('hover');
      });
    });
    
    // Check for dark sections
    const checkDarkMode = () => {
      const footer = document.querySelector('.sticky-footer');
      const bottomDrawer = document.querySelector('.bottom-drawer');
      
      const handleScroll = () => {
        const scrollY = window.scrollY;
        const windowHeight = window.innerHeight;
        
        // Check if cursor is over dark elements
        let isDark = false;
        
        if (footer) {
          const footerRect = footer.getBoundingClientRect();
          if (footerRect.top < windowHeight) {
            isDark = true;
          }
        }
        
        if (bottomDrawer && bottomDrawer.classList.contains('open')) {
          isDark = true;
        }
        
        // Toggle dark mode class
        const cursorContainer = document.querySelector('.cursor-container');
        if (cursorContainer) {
          if (isDark) {
            cursorContainer.classList.add('dark-mode');
          } else {
            cursorContainer.classList.remove('dark-mode');
          }
        }
      };
      
      window.addEventListener('scroll', handleScroll);
      handleScroll(); // Initial check
    };
    
    checkDarkMode();
    
    // Hide cursor when it leaves the window
    document.addEventListener('mouseleave', () => {
      cursorDot.style.opacity = '0';
    });
    
    document.addEventListener('mouseenter', () => {
      cursorDot.style.opacity = '1';
    });
  });
</script>