---
import Layout from '../layouts/Layout.astro';
import StickyFooter from '../components/StickyFooter.astro';
import { getCollection } from 'astro:content';

// Get all content dynamically
const allBlogPosts = await getCollection('blog');
const allProjects = await getCollection('projects');
const allCaseStudies = await getCollection('case-studies');

// Sort and get recent content
const recentPosts = allBlogPosts
  .sort((a, b) => new Date(b.data.pubDate).valueOf() - new Date(a.data.pubDate).valueOf())
  .slice(0, 3);

const featuredProjects = allProjects
  .filter(p => p.data.featured)
  .slice(0, 2);

const featuredCaseStudies = allCaseStudies.slice(0, 2);
---

<Layout title="Nolan Figueroa - Design & Technology">
  <div class="page-wrapper">
    <main class="main-content">
      <!-- Hero Section -->
      <section class="hero-section">
        <div class="hero-card">
          <div class="hero-header">
            <div class="logo">NF</div>
            <nav class="nav-links">
              <a href="/about">About</a>
              <a href="/projects">Projects</a>
              <a href="/blog">Blog</a>
            </nav>
            <a href="/contact" class="contact-btn">Contact</a>
          </div>
          
          <div class="hero-content">
            <span class="hero-tag">Portfolio</span>
            <h1 class="hero-title">
              Design & Creative<br/>
              Technology
            </h1>
            <p class="hero-subtitle">
              Bridging design and tech to transform how people and 
              organizations come together through innovative experiences
            </p>
            <div class="hero-actions">
              <a href="/projects" class="btn btn-primary">Get Started →</a>
            </div>
          </div>
        </div>
        
        <div class="hero-visual">
          <div class="visual-content">
            <div class="stat-card">
              <div class="stat-number">{allProjects.length}+</div>
              <div class="stat-label">Projects Completed</div>
            </div>
            <div class="visual-text">
              CREATIVE<br/>
              SOLUTIONS
            </div>
          </div>
        </div>
      </section>

      <!-- Features Grid -->
      <section class="features-section">
        <div class="features-header">
          <span class="section-tag">Features</span>
          <h2>We offer expertise in</h2>
        </div>
        
        <div class="features-grid">
          <div class="feature-card">
            <div class="feature-icon">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                <rect x="3" y="3" width="18" height="18" rx="2" stroke="currentColor" stroke-width="2"/>
                <path d="M3 9h18M9 21V9" stroke="currentColor" stroke-width="2"/>
              </svg>
            </div>
            <h3>Design Systems</h3>
            <p>Scalable foundations ensuring consistency across digital products</p>
            <a href="/projects" class="learn-more">Learn more →</a>
          </div>

          <div class="feature-card highlight">
            <div class="feature-icon">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path d="M13 2L3 14l9 8L22 10z" stroke="currentColor" stroke-width="2"/>
              </svg>
            </div>
            <h3>Creative Tech</h3>
            <p>Innovation at the intersection of design and development</p>
            <a href="/case-studies" class="learn-more">Learn more →</a>
          </div>

          <div class="feature-card">
            <div class="feature-icon">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2"/>
                <path d="M12 6v6l4 2" stroke="currentColor" stroke-width="2"/>
              </svg>
            </div>
            <h3>User Research</h3>
            <p>Data-driven insights informing meaningful design decisions</p>
            <a href="/blog" class="learn-more">Learn more →</a>
          </div>

          <div class="feature-card">
            <div class="feature-icon">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path d="M12 2v20M2 12h20" stroke="currentColor" stroke-width="2"/>
              </svg>
            </div>
            <h3>Product Strategy</h3>
            <p>Strategic thinking from concept through to launch</p>
            <a href="/about" class="learn-more">Learn more →</a>
          </div>
        </div>
      </section>

      <!-- Projects Section -->
      {(featuredProjects.length > 0 || allProjects.length > 0) && (
        <section class="projects-section">
          <div class="section-header">
            <div>
              <span class="section-tag">Projects</span>
              <h2>Featured Work</h2>
            </div>
            <a href="/projects" class="view-all">View all →</a>
          </div>

          <div class="projects-grid">
            {(featuredProjects.length > 0 ? featuredProjects : allProjects.slice(0, 2)).map((project) => (
              <a href={`/projects/${project.slug}`} class="project-card">
                <div class="project-image">
                  <div class="image-placeholder">
                    <span>{project.data.year}</span>
                  </div>
                </div>
                <div class="project-info">
                  <span class="project-type">{project.data.type || 'Project'}</span>
                  <h3>{project.data.title}</h3>
                  <p>{project.data.description}</p>
                </div>
              </a>
            ))}
          </div>
        </section>
      )}

      <!-- Blog Section -->
      {recentPosts.length > 0 && (
        <section class="blog-section">
          <div class="section-header">
            <div>
              <span class="section-tag">Blog</span>
              <h2>Latest Articles</h2>
            </div>
            <a href="/blog" class="view-all">View all →</a>
          </div>

          <div class="blog-list">
            {recentPosts.map((post) => (
              <a href={`/blog/${post.slug}`} class="blog-item">
                <span class="blog-date">
                  {new Date(post.data.pubDate).toLocaleDateString('en-US', { 
                    month: 'short', 
                    year: 'numeric' 
                  })}
                </span>
                <h3>{post.data.title}</h3>
                <span class="blog-arrow">→</span>
              </a>
            ))}
          </div>
        </section>
      )}

      <!-- CTA Section -->
      <section class="cta-section">
        <div class="cta-card">
          <h2>Let's Build Together</h2>
          <p>Available for freelance projects and creative collaborations</p>
          <a href="mailto:hello@astronolan.com" class="btn btn-lime">Get Started →</a>
        </div>
      </section>
    </main>
    
    <StickyFooter />
  </div>
</Layout>

<style>
  :root {
    --radius: 20px;
    --radius-sm: 12px;
  }

  .page-wrapper {
    min-height: 100vh;
    background: var(--bg-sage);
  }
  
  .main-content {
    max-width: 1200px;
    margin: 0 auto;
    padding: 2rem;
    padding-bottom: 4rem;
  }

  /* Hero Section */
  .hero-section {
    display: grid;
    grid-template-columns: 1.2fr 1fr;
    gap: 2rem;
    margin-bottom: 4rem;
  }

  .hero-card {
    background: var(--bg-white);
    border-radius: var(--radius);
    overflow: hidden;
  }

  .hero-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 1.5rem 2rem;
    border-bottom: 1px solid var(--bg-off-white);
  }

  .logo {
    font-family: 'JetBrains Mono', monospace;
    font-weight: 900;
    font-size: 1.5rem;
    background: var(--text-black);
    color: var(--bg-white);
    width: 40px;
    height: 40px;
    border-radius: var(--radius-sm);
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .nav-links {
    display: flex;
    gap: 2rem;
    flex: 1;
    justify-content: center;
  }

  .nav-links a {
    color: var(--text-black);
    text-decoration: none;
    font-weight: 500;
    transition: opacity 0.3s;
  }

  .nav-links a:hover {
    opacity: 0.6;
  }

  .contact-btn {
    background: var(--text-black);
    color: var(--bg-white);
    padding: 0.5rem 1.5rem;
    border-radius: var(--radius-sm);
    text-decoration: none;
    font-weight: 600;
    transition: all 0.3s;
  }

  .contact-btn:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
  }

  .hero-content {
    padding: 3rem;
  }

  .hero-tag {
    display: inline-block;
    background: var(--bg-off-white);
    padding: 0.5rem 1rem;
    border-radius: var(--radius-sm);
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    margin-bottom: 1.5rem;
  }

  .hero-title {
    font-family: 'JetBrains Mono', monospace;
    font-size: clamp(2rem, 4vw, 3.5rem);
    font-weight: 900;
    line-height: 1;
    margin: 0 0 1.5rem;
  }

  .hero-subtitle {
    font-size: 1.125rem;
    line-height: 1.6;
    color: #666;
    margin-bottom: 2rem;
  }

  .hero-actions {
    display: flex;
    gap: 1rem;
  }

  .btn {
    display: inline-flex;
    align-items: center;
    padding: 1rem 2rem;
    border-radius: var(--radius-sm);
    font-weight: 600;
    text-decoration: none;
    transition: all 0.3s;
  }

  .btn-primary {
    background: var(--text-black);
    color: var(--bg-white);
  }

  .btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
  }

  .btn-lime {
    background: var(--accent-lime);
    color: var(--text-black);
  }

  .btn-lime:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 24px rgba(236, 249, 90, 0.4);
  }

  .hero-visual {
    background: var(--accent-lime);
    border-radius: var(--radius);
    padding: 3rem;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .visual-content {
    text-align: center;
  }

  .stat-card {
    background: var(--bg-white);
    border-radius: var(--radius-sm);
    padding: 1.5rem;
    margin-bottom: 2rem;
  }

  .stat-number {
    font-family: 'JetBrains Mono', monospace;
    font-size: 2.5rem;
    font-weight: 900;
  }

  .stat-label {
    font-size: 0.875rem;
    color: #666;
  }

  .visual-text {
    font-family: 'JetBrains Mono', monospace;
    font-size: 2rem;
    font-weight: 900;
    line-height: 1;
  }

  /* Features Section */
  .features-section {
    margin-bottom: 4rem;
  }

  .features-header {
    margin-bottom: 2rem;
  }

  .section-tag {
    display: inline-block;
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: #666;
  }

  h2 {
    font-family: 'JetBrains Mono', monospace;
    font-size: 2rem;
    font-weight: 700;
    margin: 0.5rem 0 0;
  }

  .features-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1.5rem;
  }

  .feature-card {
    background: var(--bg-white);
    border-radius: var(--radius);
    padding: 2rem;
    transition: all 0.3s;
  }

  .feature-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-lg);
  }

  .feature-card.highlight {
    background: var(--accent-lime);
  }

  .feature-icon {
    width: 48px;
    height: 48px;
    background: var(--bg-off-white);
    border-radius: var(--radius-sm);
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 1rem;
  }

  .feature-card.highlight .feature-icon {
    background: rgba(0, 0, 0, 0.1);
  }

  .feature-card h3 {
    font-family: 'JetBrains Mono', monospace;
    font-size: 1.25rem;
    font-weight: 700;
    margin: 0 0 0.75rem;
  }

  .feature-card p {
    font-size: 0.95rem;
    line-height: 1.5;
    color: #666;
    margin: 0 0 1rem;
  }

  .feature-card.highlight p {
    color: var(--text-black);
  }

  .learn-more {
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--text-black);
    text-decoration: none;
    transition: all 0.3s;
  }

  .learn-more:hover {
    transform: translateX(4px);
  }

  /* Projects Section */
  .projects-section {
    margin-bottom: 4rem;
  }

  .section-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-end;
    margin-bottom: 2rem;
  }

  .view-all {
    color: var(--text-black);
    text-decoration: none;
    font-weight: 500;
    transition: all 0.3s;
  }

  .view-all:hover {
    transform: translateX(4px);
  }

  .projects-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    gap: 2rem;
  }

  .project-card {
    background: var(--bg-white);
    border-radius: var(--radius);
    overflow: hidden;
    text-decoration: none;
    color: var(--text-black);
    transition: all 0.3s;
  }

  .project-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-lg);
  }

  .project-image {
    aspect-ratio: 16/9;
    background: var(--bg-off-white);
  }

  .image-placeholder {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: 'JetBrains Mono', monospace;
    font-size: 2rem;
    font-weight: 900;
    color: #ddd;
  }

  .project-info {
    padding: 1.5rem;
  }

  .project-type {
    display: inline-block;
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    padding: 0.25rem 0.75rem;
    background: var(--bg-off-white);
    border-radius: var(--radius-sm);
    margin-bottom: 0.75rem;
  }

  .project-card h3 {
    font-family: 'JetBrains Mono', monospace;
    font-size: 1.25rem;
    font-weight: 700;
    margin: 0 0 0.5rem;
  }

  .project-card p {
    font-size: 0.95rem;
    color: #666;
    margin: 0;
  }

  /* Blog Section */
  .blog-section {
    margin-bottom: 4rem;
  }

  .blog-list {
    background: var(--bg-white);
    border-radius: var(--radius);
    overflow: hidden;
  }

  .blog-item {
    display: flex;
    align-items: center;
    padding: 1.5rem 2rem;
    border-bottom: 1px solid var(--bg-off-white);
    text-decoration: none;
    color: var(--text-black);
    transition: all 0.3s;
  }

  .blog-item:last-child {
    border-bottom: none;
  }

  .blog-item:hover {
    background: var(--bg-off-white);
  }

  .blog-item:hover .blog-arrow {
    transform: translateX(4px);
  }

  .blog-date {
    font-size: 0.875rem;
    color: #666;
    min-width: 80px;
  }

  .blog-item h3 {
    flex: 1;
    font-weight: 600;
    margin: 0 2rem 0 1rem;
  }

  .blog-arrow {
    font-size: 1.25rem;
    transition: all 0.3s;
  }

  /* CTA Section */
  .cta-section {
    margin-bottom: 2rem;
  }

  .cta-card {
    background: var(--text-black);
    color: var(--bg-white);
    border-radius: var(--radius);
    padding: 3rem;
    text-align: center;
  }

  .cta-card h2 {
    color: var(--bg-white);
    margin-bottom: 1rem;
  }

  .cta-card p {
    font-size: 1.125rem;
    opacity: 0.9;
    margin: 0 0 2rem;
  }

  /* Responsive */
  @media (max-width: 768px) {
    .main-content {
      padding: 1rem;
    }

    .hero-section {
      grid-template-columns: 1fr;
    }

    .hero-header {
      padding: 1rem;
    }

    .nav-links {
      display: none;
    }

    .hero-content {
      padding: 2rem;
    }

    .projects-grid {
      grid-template-columns: 1fr;
    }

    .section-header {
      flex-direction: column;
      align-items: flex-start;
      gap: 0.5rem;
    }

    .blog-item {
      flex-direction: column;
      align-items: flex-start;
      gap: 0.5rem;
    }

    .blog-arrow {
      position: absolute;
      right: 1.5rem;
    }
  }
</style>